(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{17:function(e){e.exports={a:"user-api",b:"0.1.0"}},24:function(e,t,n){e.exports=n(36)},33:function(e,t,n){},35:function(e,t,n){},36:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(13),l=n(12),i=n.n(l),s=(n(33),n(1)),c=n.n(s),u=n(11),m=n(3),d=n(4),p=n(6),h=n(5),f=n(7),E=(n(35),"INITIATE_USERS"),v="UPDATE_USER",b="DELETE_USER";var g=function(e){function t(){return Object(m.a)(this,t),Object(p.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(f.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){var e=this.props,t=e.user,n=e.onEditToggle,a=e.onDelete;return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"userList-row",onClick:function(){return n(t)}},r.a.createElement("div",null,t.name.title," ",t.name.first," ",t.name.last),r.a.createElement("div",null,t.login.username),r.a.createElement("div",null,t.gender),r.a.createElement("div",null,t.email),r.a.createElement("div",null,t.phone),r.a.createElement("div",null,t.location.street,", ",t.location.city),r.a.createElement("div",null,r.a.createElement("img",{src:t.picture.thumbnail,alt:"user-thumbnail"})),r.a.createElement("div",null,r.a.createElement("button",{className:"button",onClick:function(e){return a(e,t.id)}},"Delete"))))}}]),t}(a.Component),O=function(e){function t(){return Object(m.a)(this,t),Object(p.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(f.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){var e=this.props,t=e.users,n=e.onEditToggle,a=e.onDelete;return r.a.createElement("div",{className:"userList"},r.a.createElement("div",{className:"userList-row userList-header"},r.a.createElement("div",null,"Full name"),r.a.createElement("div",null,"Username"),r.a.createElement("div",null,"Gender"),r.a.createElement("div",null,"Email"),r.a.createElement("div",null,"Phone"),r.a.createElement("div",null,"Location"),r.a.createElement("div",null,"Photo"),r.a.createElement("div",null)),t.map(function(e){return r.a.createElement(g,{user:e,onEditToggle:n,onDelete:a})}))}}]),t}(a.Component);O.defaultProps={users:[]};var y=O,j=n(9),C=function(e){function t(e){var n;return Object(m.a)(this,t),(n=Object(p.a)(this,Object(h.a)(t).call(this))).componentWillMount=function(){n.setState({user:n.props.editingUser})},n.onChange=function(e){var t=n.state.user,a=e.target,r=a.name,o=a.value,l=Object(j.a)({},t);"title"===r||"first"===r||"last"===r?l.name[r]=o:"street"===r||"city"===r||"state"===r?l.location[r]=o:l[r]=o,n.setState({user:l})},n.onSubmit=function(e){e.preventDefault();var t=n.state.user;n.props.onFormSubmit(t)},n.state={user:{}},n}return Object(f.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){var e=this.props,t=e.display,n=e.onModalToggle,a=this.state.user;return t?r.a.createElement("div",{className:"modal"},r.a.createElement("div",{className:"modal-inner"},r.a.createElement("form",{className:"form",onSubmit:this.onSubmit},r.a.createElement("div",{className:"inner"},r.a.createElement("label",{for:"title"},"Title"),r.a.createElement("input",{name:"title",value:a.name.title,onChange:this.onChange}),r.a.createElement("label",{for:"first"},"First name"),r.a.createElement("input",{name:"first",value:a.name.first,onChange:this.onChange}),r.a.createElement("label",{for:"last"},"Last name"),r.a.createElement("input",{name:"last",value:a.name.last,onChange:this.onChange}),r.a.createElement("label",{for:"email"},"Email"),r.a.createElement("input",{name:"email",value:a.email,onChange:this.onChange}),r.a.createElement("label",{for:"phone"},"Phone"),r.a.createElement("input",{name:"phone",value:a.phone,onChange:this.onChange}),r.a.createElement("label",{for:"cell"},"Cell"),r.a.createElement("input",{name:"cell",value:a.cell,onChange:this.onChange}),r.a.createElement("label",{for:"street"},"Street"),r.a.createElement("input",{name:"street",value:a.location.street,onChange:this.onChange}),r.a.createElement("label",{for:"city"},"City"),r.a.createElement("input",{name:"city",value:a.location.city,onChange:this.onChange}),r.a.createElement("label",{for:"state"},"State"),r.a.createElement("input",{name:"state",value:a.location.state,onChange:this.onChange}),r.a.createElement("button",{type:"submit",className:"button"},"Update user"))),r.a.createElement("div",{className:"modal-close",onClick:n},"X"))):null}}]),t}(a.Component),U=function(e){function t(){var e;return Object(m.a)(this,t),(e=Object(p.a)(this,Object(h.a)(t).call(this))).componentWillMount=Object(u.a)(c.a.mark(function t(){var n;return c.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n=[],t.next=3,fetch("http://localhost:3001/users",{method:"GET",headers:{"Content-type":"application/json; charset=UTF-8"}}).then(function(e){return e.json()}).then(function(t){if(!t.length)return e.getInitialUserData();e.setState({users:t}),n=t});case 3:e.props.addInitialUserData(n);case 4:case"end":return t.stop()}},t)})),e.getInitialUserData=Object(u.a)(c.a.mark(function t(){var n,a;return c.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("https://randomuser.me/api/?results=10").then(function(e){return e.json()});case 2:return n=t.sent,a=1,n.results.forEach(function(e){e.id=a,a++}),t.next=7,fetch("http://localhost:3001/users",{method:"POST",headers:{"Content-type":"application/json; charset=UTF-8"},body:JSON.stringify(n.results)});case 7:e.props.addInitialUserData(n);case 8:case"end":return t.stop()}},t)})),e.onEditToggle=function(t){e.setState({modalOpened:!e.state.modalOpened,editingUser:t})},e.onFormSubmit=function(){var t=Object(u.a)(c.a.mark(function t(n){return c.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("http://localhost:3001/users/".concat(n.id),{method:"PUT",headers:{"Content-type":"application/json; charset=UTF-8"},body:JSON.stringify(n)});case 2:t.sent.ok&&(e.props.updateUser(n),e.setState({modalOpened:!1}));case 4:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}(),e.onDelete=function(){var t=Object(u.a)(c.a.mark(function t(n,a){return c.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n.stopPropagation(),t.next=3,fetch("http://localhost:3001/users/".concat(a),{method:"DELETE",headers:{"Content-type":"application/json; charset=UTF-8"}});case 3:e.props.deleteUser(a);case 4:case"end":return t.stop()}},t)}));return function(e,n){return t.apply(this,arguments)}}(),e.state={modalOpened:!1,editingUser:{},users:[]},e}return Object(f.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){var e=this.state,t=e.modalOpened,n=e.editingUser,a=this.props.users;return a.length?r.a.createElement("div",{className:"App"},r.a.createElement(y,{users:a,onEditToggle:this.onEditToggle,onDelete:this.onDelete}),t&&r.a.createElement(C,{display:t,editingUser:n,onModalToggle:this.onEditToggle,onFormSubmit:this.onFormSubmit})):r.a.createElement("noscript",null)}}]),t}(a.Component);U.defaultProps={users:[]};var w=Object(o.b)(function(e){return{users:e.users.data}},{addInitialUserData:function(e){return function(t){t({type:E,payload:e})}},updateUser:function(e){return function(t){t({type:v,payload:e})}},deleteUser:function(e){return function(t){t({type:b,payload:e})}}})(U);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var T=n(2),S=n(21),D=n(22),k=n(17),N=n(23),x={users:[]},F=function(e,t){return e.map(function(e){return e.id!==t.id?e:Object(j.a)({},e,t)})},I=function(e,t){var n=e.filter(function(e){return e.id!==t});return Object(N.a)(n)};var P=Object(T.combineReducers)({users:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:x,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case E:return{data:t.payload};case v:return{data:F(e.data,t.payload)};case b:return Object(j.a)({},e,{data:I(e.data,t.payload)});default:return e}}});var L=function(e,t){var n,a=[S.a];return n=Object(D.composeWithDevTools)({name:"".concat(k.a,"@").concat(k.b)})(T.applyMiddleware.apply(void 0,a)),Object(T.createStore)(P,e,n)}();i.a.render(r.a.createElement(o.a,{store:L},r.a.createElement(w,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[24,1,2]]]);
//# sourceMappingURL=main.f7101de5.chunk.js.map